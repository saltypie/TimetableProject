{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport '../Login.css';\nimport axios from 'axios';\nexport const searchFunction = async (endpoint, inputParams) => {\n  try {\n    endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\n    const response = await axios.get(`http://localhost:8000/timeapp/api/${endpoint}/`, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      },\n      params: inputParams\n    });\n    const responseData = response.data;\n    let wasVisitCreated = await createVisit(endpoint, \"Read\");\n    console.log(wasVisitCreated);\n    return responseData;\n  } catch (error) {\n    console.log(error);\n    return `Error-${error}`;\n  }\n};\nexport const generalPatch = async (endpoint, id, data) => {\n  try {\n    endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\n    await axios.patch(`http://localhost:8000/timeapp/api/${endpoint}/${id}/`, data, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      }\n    });\n    let wasVisitCreated = await createVisit(endpoint, \"Update\");\n    console.log(wasVisitCreated);\n    return true;\n  } catch (error) {\n    console.log(error);\n    return `Error-${error}`;\n  }\n};\nexport const generalPost = async (endpoint, data) => {\n  try {\n    endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\n    await axios.post(`http://localhost:8000/timeapp/api/${endpoint}/`, data, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    let wasVisitCreated = await createVisit(endpoint, \"Create\");\n    console.log(wasVisitCreated);\n    return true;\n  } catch (error) {\n    console.log(error);\n    return false;\n  }\n};\nexport const generalDelete = async (endpoint, id) => {\n  try {\n    endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\n    await axios.delete(`http://localhost:8000/timeapp/api/${endpoint}/${id}/`, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      }\n    });\n    let wasVisitCreated = await createVisit(endpoint, \"Delete\");\n    console.log(wasVisitCreated);\n    return true;\n  } catch (error) {\n    console.log(error);\n    return `Error-${error}`;\n  }\n};\nconst createVisit = async (endpoint, action) => {\n  try {\n    let returnBool = false;\n    const table_name = tableName(endpoint);\n    if (!table_name || table_name === \"Unknown\") {\n      console.log(\"Table name was not of concern\");\n      return false;\n    }\n    const data = {\n      table_name: table_name,\n      action: action\n    };\n    const response = await axios.post('http://localhost:8000/timeapp/api/viewsets/visits/', data, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    response.data ? returnBool = true : returnBool = false;\n    return returnBool;\n  } catch (error) {\n    console.log(error);\n    console.log(\"Error creating visit\");\n    return false;\n  }\n};\nfunction tableName(endpoint) {\n  endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\n  let endpoint_arr = endpoint.split(\"/\");\n  if (endpoint_arr.includes(\"institutions\")) {\n    return \"Institution\";\n  } else if (endpoint_arr.includes(\"meetingtimes\")) {\n    return \"MeetingTime\";\n  } else if (endpoint_arr.includes(\"streams\")) {\n    return \"Stream\";\n  } else if (endpoint_arr.includes(\"rooms\")) {\n    return \"Room\";\n  } else if (endpoint_arr.includes(\"roles\")) {\n    return \"Role\";\n  } else if (endpoint_arr.includes(\"courses\")) {\n    return \"Course\";\n  } else if (endpoint_arr.includes(\"profile\")) {\n    return \"Profile\";\n  } else if (endpoint_arr.includes(\"departments\")) {\n    return \"Department\";\n  } else if (endpoint_arr.includes(\"lessondetails\")) {\n    return \"Lesson\";\n  } else if (endpoint_arr.includes(\"timetables\")) {\n    return \"Timetable\";\n  } else {\n    return \"Unknown\"; // or handle default case as needed\n  }\n}\nexport const fetchVisitData = async endpoint => {\n  try {\n    const response = await axios.get(`http://localhost:8000/timeapp/api/viewsets/visits/${endpoint}/`, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching visit data:', error);\n    return null;\n  }\n};","map":{"version":3,"names":["React","useEffect","useState","axios","searchFunction","endpoint","inputParams","replace","response","get","headers","localStorage","getItem","params","responseData","data","wasVisitCreated","createVisit","console","log","error","generalPatch","id","patch","generalPost","post","generalDelete","delete","action","returnBool","table_name","tableName","endpoint_arr","split","includes","fetchVisitData"],"sources":["C:/xampp/htdocs/WORK/CSProj/ProjectRepositories/TimetableProject/Front-End/frontend/src/components/reusable/functions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport '../Login.css';\r\nimport axios from 'axios';\r\n\r\nexport const searchFunction = async (endpoint,inputParams) => {\r\n\r\n    try {\r\n        endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\r\n        const response = await axios.get(`http://localhost:8000/timeapp/api/${endpoint}/`,{\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n            },\r\n            params: inputParams\r\n        })\r\n        const responseData = response.data;\r\n\r\n        let wasVisitCreated = await createVisit(endpoint, \"Read\");\r\n        console.log(wasVisitCreated)\r\n\r\n        return responseData;\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n        return `Error-${error}`\r\n    }\r\n}\r\n\r\nexport const generalPatch = async (endpoint,id,data) => {\r\n    try {\r\n        endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\r\n        await axios.patch(`http://localhost:8000/timeapp/api/${endpoint}/${id}/`, data, {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            }\r\n        }); \r\n\r\n        let wasVisitCreated = await createVisit(endpoint, \"Update\");\r\n        console.log(wasVisitCreated)\r\n\r\n        return true;   \r\n    } catch (error) {\r\n        console.log(error);\r\n        return `Error-${error}`\r\n    }\r\n}\r\nexport const generalPost = async (endpoint,data) => {\r\n    try {\r\n        endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\r\n        await axios.post(`http://localhost:8000/timeapp/api/${endpoint}/`, data, {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        \r\n        let wasVisitCreated = await createVisit(endpoint, \"Create\");\r\n        console.log(wasVisitCreated)        \r\n\r\n        return true;   \r\n    } catch (error) {\r\n        console.log(error);\r\n        return false;\r\n    }\r\n}\r\n\r\nexport const generalDelete = async (endpoint,id) => {\r\n    try {\r\n        endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\r\n        await axios.delete(`http://localhost:8000/timeapp/api/${endpoint}/${id}/`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('access_token')}`\r\n            }\r\n        }); \r\n\r\n        let wasVisitCreated = await createVisit(endpoint, \"Delete\");\r\n        console.log(wasVisitCreated)\r\n\r\n        return true;   \r\n    } catch (error) {\r\n        console.log(error);\r\n        return `Error-${error}`\r\n    }\r\n}\r\n\r\nconst createVisit = async (endpoint, action) => {\r\n    try {\r\n        let returnBool = false;\r\n        const table_name = tableName(endpoint);\r\n        if(!table_name || table_name===\"Unknown\"){\r\n            console.log(\"Table name was not of concern\")\r\n            return false;\r\n        }\r\n        const data = {\r\n            table_name: table_name,\r\n            action: action\r\n        }\r\n        const response = await axios.post('http://localhost:8000/timeapp/api/viewsets/visits/', data, {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        response.data ? returnBool = true : returnBool = false;\r\n        return returnBool\r\n    } catch (error) {\r\n        console.log(error);\r\n        console.log(\"Error creating visit\")\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction tableName(endpoint) {\r\n    endpoint = endpoint.replace(/(^\\/+|\\/+$)/g, '');\r\n    let endpoint_arr = endpoint.split(\"/\")\r\n\r\n    if (endpoint_arr.includes(\"institutions\")) {\r\n        return \"Institution\";\r\n    } else if (endpoint_arr.includes(\"meetingtimes\")) {\r\n        return \"MeetingTime\";\r\n    } else if (endpoint_arr.includes(\"streams\")) {\r\n        return \"Stream\";\r\n    } else if (endpoint_arr.includes(\"rooms\")) {\r\n        return \"Room\";\r\n    } else if (endpoint_arr.includes(\"roles\")) {\r\n        return \"Role\";\r\n    } else if (endpoint_arr.includes(\"courses\")) {\r\n        return \"Course\";\r\n    } else if (endpoint_arr.includes(\"profile\")) {\r\n        return \"Profile\";\r\n    } else if (endpoint_arr.includes(\"departments\")) {\r\n        return \"Department\";\r\n    } else if (endpoint_arr.includes(\"lessondetails\")) {\r\n        return \"Lesson\";\r\n    } else if (endpoint_arr.includes(\"timetables\")) {\r\n        return \"Timetable\";\r\n    } else {\r\n        return \"Unknown\"; // or handle default case as needed\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const fetchVisitData = async (endpoint) => {\r\n  try {\r\n    const response = await axios.get(`http://localhost:8000/timeapp/api/viewsets/visits/${endpoint}/`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n      }\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching visit data:', error);\r\n    return null;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}